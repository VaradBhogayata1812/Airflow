#!/bin/bash
# init-airflow.sh

# Initialize the database
airflow db init

# Create an admin user if it doesn't exist
create_admin() {
  airflow users create \
    --username 'admin' \
    --firstname 'Varad' \
    --lastname 'Bhogayata' \
    --role 'Admin' \
    --email 'varadbhogayata78@gmail.com' \
    --password 'Varad@1812'
}

# Start the scheduler in the background
airflow scheduler &

# Start the webserver in the background
airflow webserver -p 8080 &

# Wait for the background processes to finish (this will never happen in normal circumstances,
# this line is to keep the script running)
wait
